<?php

/**
 * Update existing entities with the new target property.
 */
function dropsolid_social_widgets_update_8001(&$sandbox) {

  $socialShareLinksManager = Drupal::service('dropsolid_social_widgets.manager');
  $links = $socialShareLinksManager->getSocialShareLinks();

  foreach ($links as $link) {
    $link->target = '_blank';
    if ($link->getOriginalId() == 'print') {
      $link->target = '_self';
    }
    $link->save();
  }

}
